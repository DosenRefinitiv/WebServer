<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <!-- Dory SDK (required) -->
    <script src="https://dory-staging.financial.com/sdk/3wjU8FQx/sdk.js"></script>
    <script src="https://dory-staging.financial.com/sdk/3wjU8FQx/polyfill.js"></script>

    <!-- Widget files (required) -->

    <script src="vendor.js"></script>
    <script src="widgets.js"></script>

    <link rel="stylesheet" href="vendor.css" />
    <link rel="stylesheet" href="widgets.css" />

    <!-- The following "main.css" represents css of the page hosting the widgets.
         It should be loaded after the widget files if you want to add css to overwrite styles  of the widgets. -->
    <link rel="stylesheet" type="text/css" href="main.css" />

    <title>Widget Integration Example</title>
  </head>

  <body>
    <div class="page-header">
      <div class="page-title">Widget Integration Example</div>
    </div>
    <div class="page-content">
      <div class="heatmap-widget"></div>
      <div class="key-figures-widget"></div>
    </div>

    <script>
      /* Manual Login (for integration test only !) */
      if (dory.ServiceAuth.isSessionValid() === true) {
        addWidgets();
      } else {
        dory.ServiceAuth.login('ameriprise_snap', 'Th@arLSk2!yWvcWG', 'wlib').then(addWidgets);
      }

      /* Ticker Integration Code */
      function addWidgets(result) {

        /* Example: Initialize widget with default settings */
        var heatmap = window.fdc__widgets__.WHeatmap.init('.heatmap-widget', {
          ric: ".DJI"
        });
        // Example: Change color
        heatmap.setColors({
          volatilityLow: '#b80870',
          volatilityHigh: '#f637a8',
          fundamentalsLow: '#b75b00',
          fundamentalsHigh: '#ff7f00',
          changeNegative: '#a65549',
          changeNeutral: '#e6e6e6',
          changePositive: '#0489bc',
          defaultLow: '#009db5',
          defaultHigh: '#00ccea'
        });

        // /* Example: Initialize widget with default settings */
        var keyFigures = window.fdc__widgets__.WKeyFigures.init('.key-figures-widget');
	// Example: Set RIC
	keyFigures.setRic("AAPL.OQ");
      }
    </script>

    <!-- Example: Overwrite/customize widget css -->
    <style>
      .heatmap-widget {
        height: 350px;
      }
      .key-figures-widget {
      }
    </style>
  </body>
</html>
